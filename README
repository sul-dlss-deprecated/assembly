== Dependencies

Check dependencies for jp2 creation in the assembly-image gem.

==Version History

1.0.0  Released to production
1.2.0  Changed expected checksum behavior from <provider_checksum> node to regular <checksum> node.  Eliminated checksum_compare robot.  Must be run in combination with pre-assembly 1.2.0.
1.2.2  Downcase checksums from provider before comparing them
1.3.0  Only create derivates for resource type=image or resource type=page
1.3.2  Prepare for release listing on DLSS release board
1.3.3  Update to use new DruidTools gem and new assembly-utils gem
1.3.4  Update to latest version of lyber-core gem, which allows robots to sleep and try again if the workflow service call fails
1.4.0  Update robots so that they will find content and metadata files in both the old style (oo/000/oo/0001) and the new style (oo/000/oo/0001/content and oo/000/oo/0001/metadata)
1.4.2  When generating the source path to pass to the initiate workspace web service call, determine if we are using the new druid tree folder or the older style.  Send the source path to the correct location.
1.4.3  don't overwrite mimetype or filesize if it already exists in content metadata
1.5.0  allow multiple root directories to be specified so that we can have the robots look in directories other than '/dor/assembly' to find the content
1.5.1  Update service_root configuration to allow different service URLs (e.g. with or without v1) for test and production 

== Running tests

For local testing, add this to your bash profile:

    export ROBOT_ENVIRONMENT="local"

== Deployment

See the Capfile.


== General notes on the assembly robots

The assembly robots do not interact with DOR, except for the workflow changes
provided by robot framework. Instead, all of the work occurs directly in the
file system (in the object's druid tree directory).

Typically, a robot does some work and then adds more information to the
contentMetadata.xml file sitting in the druid tree directory.


== Robots

    - Create JP2.

    - Compute and compare checksums.

    - Compute image attributes.

    - Initiate the common-accessioning workflow.
